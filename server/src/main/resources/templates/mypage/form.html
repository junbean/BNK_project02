<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>정보 수정</title>
    <link rel="stylesheet" href="/css/reset.css" />
    <link rel="stylesheet" href="/css/userHeader.css" />
    <link rel="stylesheet" href="/css/mypage.css" />
    <link rel="stylesheet" href="/css/footer.css" />
  </head>
  <body>
    <!-- 헤더 -->
    <th:block th:replace="fragments/userHeader :: userHeader"></th:block>

    <div class="form-container">
      <h2 class="page-title">회원 정보 수정</h2>

      <form
        th:action="@{/mypage/edit}"
        th:object="${updateRequest}"
        method="post"
      >
        <div class="form-group">
          <label class="form-label">아이디</label>
          <input
            type="text"
            th:field="*{username}"
            readonly
            class="form-control form-control-plaintext"
          />
        </div>

        <div class="form-group">
          <label class="form-label">현재 비밀번호</label>
          <input
            type="password"
            th:field="*{currentPassword}"
            placeholder="현재 비밀번호를 입력하세요"
            required
            class="form-control"
          />
          <div
            th:if="${#fields.hasErrors('currentPassword')}"
            class="form-error"
            th:errors="*{currentPassword}"
          ></div>
        </div>

        <div class="form-group">
          <label class="form-label">새 비밀번호</label>
          <input
            type="password"
            th:field="*{newPassword}"
            placeholder="변경 할 비밀번호를 입력하세요"
            class="form-control"
          />
          <div
            th:if="${#fields.hasErrors('newPassword')}"
            class="form-error"
            th:errors="*{newPassword}"
          ></div>
        </div>

        <div class="form-group">
          <label class="form-label">새 비밀번호 확인</label>
          <input
            type="password"
            th:field="*{confirmNewPassword}"
            placeholder="새 비밀번호를 다시 입력하세요"
            class="form-control"
          />
          <div
            th:if="${#fields.hasErrors('confirmNewPassword')}"
            class="form-error"
            th:errors="*{confirmNewPassword}"
          ></div>
        </div>

        <div class="form-group">
          <label class="form-label">이름</label>
          <input
            type="text"
            th:field="*{name}"
            placeholder="이름을 입력하세요"
            required
            class="form-control"
          />
          <div
            th:if="${#fields.hasErrors('name')}"
            class="form-error"
            th:errors="*{name}"
          ></div>
        </div>

        <div class="form-group">
          <label class="form-label">전화번호</label>
          <input
            type="text"
            th:field="*{phone}"
            placeholder="ex) 010-1234-5678"
            required
            class="form-control"
          />
          <div
            th:if="${#fields.hasErrors('phone')}"
            class="form-error"
            th:errors="*{phone}"
          ></div>
        </div>

        <div class="form-actions">
          <button type="submit" class="btn btn-primary">정보 수정</button>
        </div>

        <div class="form-group">
          <div
            th:if="${updateError}"
            class="form-error"
            th:text="${updateError}"
          ></div>
          <div
            th:if="${success}"
            class="form-success"
            th:text="${success}"
          ></div>
        </div>
      </form>
    </div>
    <!-- 푸터 -->
    <th:block th:replace="fragments/footer :: siteFooter"></th:block>
  </body>
</html>
